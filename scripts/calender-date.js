!function(){"use strict";function a(){return{restrict:"E",replace:!0,require:["^ngModel","smCalender"],scope:{initialDate:"@",minDate:"=",maxDate:"=",format:"@",mode:"@",startView:"@",startDay:"@",showDisplayHeader:"@"},controller:["$scope","$timeout",d],controllerAs:"vm",templateUrl:"picker/calender-date.html",link:function(a,b,c,d){var e=d[0],f=d[1];f.configureNgModel(e),a.$on("$destroy",function(){b.remove()})}}}function b(a,b,c,d){return{restrict:"E",replace:!0,scope:{value:"=",startDate:"@",weekStartDay:"@",startView:"@",mode:"@",format:"@",minDate:"@",maxDate:"@",fname:"@",lable:"@",isRequired:"@",disable:"=",form:"="},template:'  <md-input-container  >    <label for="{{fname}}">{{lable }}</label>    <input name="{{fname}}" ng-model="value"              type="text" placeholde="{{lable}}"             aria-label="{{fname}}" data-ng-required="isRequired"             ng-focus="show()" server-error class="gj-input-container">    <div ng-messages="form.fname.$error" ng-if="form[fname].$touched">    		<div ng-messages-include="{{ngMassagedTempaltePath}}"></div>    </div>    	<div id="picker" class="gj-calender-pane">     		<sm-date-picker               id="{{fname}}Picker"               ng-model="value" 				initial-date="{{value}}"              mode="{{mode}}"               start-view="{{startView}}"               data-min-date="minDate"               data-max-date="maxDate"                format="{{format}}"            	start-day="{{weekStartDay}}" > 			</sm-date-picker>    	</div>  </md-input-container>',link:function(e,f,g){function h(a,b){var c=460,d=296,e=a.top;if(a.top+c>b.bottom)var e=a.top-(a.top+c-(b.bottom-20));var f=a.left;return a.left+d>b.right&&(f=a.left-(a.left+d-(b.right-10))),{top:e,left:f}}var i=f[0].querySelector(".gj-input-container"),j=f[0].querySelector(".gj-calender-pane"),k=angular.element(j);e.ngMassagedTempaltePath=d.path,e.format=angular.isUndefined(e.format)?"MM-DD-YYYY":e.format,k.addClass("hide"),e.startDate=angular.isUndefined(e.value)?e.startDate:e.value,c.on("click",function(b){j===b.target||i===b.target||j.contains(b.target)||i.contains(b.target)||(k.removeClass("show").addClass("hide"),a.enableScrolling())}),angular.element(i).on("keydown",function(b){9===b.which&&(k.removeClass("show").addClass("hide"),angular.element(i).focus(),a.enableScrolling())}),e.show=function(){var c=i.getBoundingClientRect(),d=document.body.getBoundingClientRect();if(k.removeClass("hide"),b("sm")||b("xs"))j.style.left=(d.width-282)/2+"px",j.style.top=(d.height-450)/2+"px";else{var e=h(c,d);j.style.left=e.left+"px",j.style.top=e.top+"px"}document.body.appendChild(j),a.disableScrollAround(j),k.addClass("show")},e.$on("calender:close",function(){k.removeClass("show").addClass("hide"),j.parentNode.removeChild(j),a.enableScrolling()})}}}function c(){var a,b=" To ";return{setMassagePath:function(b){a=b},setDivider:function(a){b=a},$get:function(){return{path:a,divider:b}}}}var d=function(a,b){var c=this;c.$scope=a,c.$timeout=b,c.initialDate=a.initialDate,c.startDay=angular.isUndefined(a.startDay)||""===a.startDay?"Sunday":a.startDay,c.minDate=a.minDate,c.maxDate=a.maxDate,c.mode=angular.isUndefined(a.mode)?"DATE":a.mode,c.format=a.format,c.restrictToMinDate=angular.isUndefined(a.minDate)?!1:!0,c.restrictToMaxDate=angular.isUndefined(a.maxDate)?!1:!0,c.stopScrollPrevious=!1,c.stopScrollNext=!1,c.yearCells=[],c.monthCells=[],c.dateCellHeader=[],c.dateCells=[],c.hourCells=[],c.minuteCells=[],c.monthList=moment.months(),c.moveCalenderAnimation="",c.format=angular.isUndefined(c.format)?"MM-DD-YYYY":c.format,c.initialDate=angular.isUndefined(c.initialDate)?moment():moment(c.initialDate,c.format),c.currentDate=c.initialDate.clone(),c.restrictToMinDate&&(c.minDate=moment(c.minDate,c.format)),c.restrictToMaxDate&&(c.maxDate=moment(c.maxDate,c.format)),c.init(),a.$watch("vm.topIndex",angular.bind(this,function(a){var b=Math.floor(a/1);c.selectedYear=b}))};d.prototype.configureNgModel=function(a){this.ngModelCtrl=a;var b=this;a.$render=function(){b.ngModelCtrl.$viewValue=b.currentDate}},d.prototype.setNgModelValue=function(a){var b=this;b.ngModelCtrl.$setViewValue(a),b.ngModelCtrl.$render()},d.prototype.init=function(){var a=this;a.buildYearCells(),a.buildDateCells(),a.buildDateCellHeader(),a.buildMonthCells(),a.buidHourCells(),a.buidMinuteCells(),a.setView()},d.prototype.setView=function(){var a=this;switch(a.headerDispalyFormat="ddd, MMM DD",a.mode){case"date-time":a.view="DATE",a.headerDispalyFormat="ddd, MMM DD HH:mm";break;case"time":a.view="HOUR",a.headerDispalyFormat="HH:mm";break;default:a.view="DATE"}},d.prototype.buildYearCells=function(a){var b=this,c=b.initialDate.year()-25;angular.isUndefined(b.minDate)||(c=b.minDate.year());var d=c+25;angular.isUndefined(b.maxDate)||(d=b.maxDate.year());for(var e=c;d>=e;e++)b.yearCells.push(e)},d.prototype.buildMonthCells=function(){var a=this;a.monthCells=moment.months()},d.prototype.buildDateCells=function(){var a=this,b=a.initialDate.month(),c=a.initialDate.clone().date(0).day(a.startDay),d=!1,e=!1;angular.isUndefined(a.minDate)||(a.stopScrollPrevious=a.minDate.unix()>c.unix()),a.dateCells=[];for(var f=0;6>f;f++){for(var g=[],h=0;7>h;h++){var i=c.month()===b;e=i?!1:!0,!a.restrictToMinDate||angular.isUndefined(a.minDate)||e||(e=a.minDate.isAfter(c)),!a.restrictToMaxDate||angular.isUndefined(a.maxDate)||e||(e=a.maxDate.isBefore(c));var j={date:c.clone(),dayNum:i?c.date():"",month:c.month(),today:c.isSame(moment(),"day")&&c.isSame(moment(),"month"),year:c.year(),dayName:c.format("dddd"),isWeekEnd:d,isDisabledDate:e,isCurrentMonth:i};g.push(j),c.add(1,"d")}a.dateCells.push(g)}a.restrictToMaxDate&&!angular.isUndefined(a.maxDate)&&(a.stopScrollNext=a.maxDate.unix()<c.unix()),a.dateCells[0][6].isDisabledDate&&!a.dateCells[0][6].isCurrentMonth&&a.dateCells[0].splice(0)},d.prototype.buidHourCells=function(){for(var a=this,b=0;23>=b;b++){var c={hour:b,isCurrent:a.initialDate.hour()===b};a.hourCells.push(c)}},d.prototype.buidMinuteCells=function(){for(var a=this,b=0;59>=b;b++){var c={minute:b,isCurrent:a.initialDate.minute()===b};a.minuteCells.push(c)}},d.prototype.changePeriod=function(a){var b=this;if("p"===a){if(b.stopScrollPrevious)return;b.moveCalenderAnimation="slideLeft",b.initialDate.subtract(1,"M")}else{if(b.stopScrollNext)return;b.moveCalenderAnimation="slideRight",b.initialDate.add(1,"M")}b.buildDateCells(),b.$timeout(function(){b.moveCalenderAnimation=""},500)},d.prototype.selectDate=function(a,b){var c=this;b||(c.currentDate=a,c.setNgModelValue(a.format(c.format)),c.$scope.$emit("calender:date-selected"))},d.prototype.buildDateCellHeader=function(a){var b=this,c={sunday:{shortName:"Su",fullName:"Sunday",single:"S"},monday:{shortName:"Mo",fullName:"MonDay",single:"M"},tuesday:{shortName:"Tu",fullName:"TuesDay",single:"T"},wednesday:{shortName:"We",fullName:"Wednesday",single:"W"},thursday:{shortName:"Th",fullName:"Thursday",single:"T"},friday:{shortName:"Fr",fullName:"Friday",single:"F"},saturday:{shortName:"Sa",fullName:"Saturday",single:"S"}},d=[];for(var e in c)d.push(e);var f=moment().day(b.startDay).day(),g=0;for(var e in c)b.dateCellHeader.push(c[d[(g+f)%d.length]]),g++},d.prototype.changeView=function(a){var b=this;b.view=a},d.prototype.changeYear=function(a){var b=this;b.initialDate.year(a),b.buildDateCells(),b.view="DATE"},d.prototype.setHour=function(a){var b=this;b.currentDate.hour(a)},d.prototype.setMinute=function(a){var b=this;b.currentDate.minute(a)},d.prototype.selectedDateTime=function(){var a=this;a.setNgModelValue(a.currentDate.format(a.format)),"time"===a.mode?a.view="HOUR":a.view="DATE",a.$scope.$emit("calender:close")},d.prototype.closeDateTime=function(){var a=this;"time"===a.mode?a.view="HOUR":a.view="DATE",a.$scope.$emit("calender:close")};var e=angular.module("dateTimePicker");e.directive("smCalender",["$timeout",a]),e.directive("smDateTimePicker",["$mdUtil","$mdMedia","$document","picker",b]),e.provider("picker",[c])}();